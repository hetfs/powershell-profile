# PowerShell-Profile Structure Overview

## **ğŸ“ REPOSITORY STRUCTURE**

```
powershell-profile/                     # Root repository directory
â”œâ”€â”€ ğŸ“„ README.md                        # Main documentation & user guide
â”œâ”€â”€ ğŸ“„ Setup.ps1                        # Legacy/alternative setup script
â”œâ”€â”€ ğŸ“„ Setup-Modular.ps1                # Main modular setup script (recommended)
â”œâ”€â”€ ğŸ“„ Microsoft.PowerShell_profile.ps1 # Main profile loader (entry point)
â”œâ”€â”€ ğŸ“„ HFCustom.ps1.example             # Example customization file (template)
â”œâ”€â”€ ğŸ“„ LICENSE                          # MIT license file
â”œâ”€â”€ ğŸ“„ .gitignore                       # Git ignore rules
â”‚
â”œâ”€â”€ ğŸ“‚ Modules/                         # All 16 core modules
â”‚   â”œâ”€â”€ ğŸ“„ ProfileConfig.ps1           # Configuration & settings
â”‚   â”œâ”€â”€ ğŸ“„ CoreFunctions.ps1           # Essential utility functions
â”‚   â”œâ”€â”€ ğŸ“„ DebugModule.ps1             # Debug mode handler
â”‚   â”œâ”€â”€ ğŸ“„ UpdateModule.ps1            # Profile & PowerShell updates
â”‚   â”œâ”€â”€ ğŸ“„ AdminModule.ps1             # Admin functions & prompt
â”‚   â”œâ”€â”€ ğŸ“„ EditorModule.ps1            # Editor configuration
â”‚   â”œâ”€â”€ ğŸ“„ NetworkModule.ps1           # Network utilities
â”‚   â”œâ”€â”€ ğŸ“„ SystemModule.ps1            # System information tools
â”‚   â”œâ”€â”€ ğŸ“„ GitModule.ps1               # Git shortcuts & integration
â”‚   â”œâ”€â”€ ğŸ“„ NavigationModule.ps1        # Directory navigation
â”‚   â”œâ”€â”€ ğŸ“„ UtilityModule.ps1           # General utilities
â”‚   â”œâ”€â”€ ğŸ“„ PSReadLineModule.ps1        # Command line enhancements
â”‚   â”œâ”€â”€ ğŸ“„ CompletionModule.ps1        # Auto-completion setup
â”‚   â”œâ”€â”€ ğŸ“„ ThemeModule.ps1             # Prompt theming (Starship)
â”‚   â”œâ”€â”€ ğŸ“„ ZoxideModule.ps1            # Smart directory navigation
â”‚   â””â”€â”€ ğŸ“„ HelpModule.ps1              # Help system & documentation
â”‚
â”œâ”€â”€ ğŸ“‚ Scripts/                         # Support scripts
â”‚   â”œâ”€â”€ ğŸ“„ verify-installation.ps1     # Post-install verification
â”‚   â””â”€â”€ ğŸ“„ update-all.ps1              # Batch update utility (optional)
â”‚
â”œâ”€â”€ ğŸ“‚ Docs/                           # Documentation (optional)
â”‚   â”œâ”€â”€ ğŸ“„ module-reference.md         # Detailed module documentation
â”‚   â”œâ”€â”€ ğŸ“„ customization-guide.md      # Advanced customization guide
â”‚   â””â”€â”€ ğŸ“„ troubleshooting.md          # Common issues & solutions
â”‚
â””â”€â”€ ğŸ“‚ Examples/                       # Usage examples (optional)
    â”œâ”€â”€ ğŸ“„ HFCustom-work.ps1.example  # Work environment example
    â”œâ”€â”€ ğŸ“„ HFCustom-home.ps1.example  # Home environment example
    â””â”€â”€ ğŸ“„ machine-specific.example.ps1 # Machine-specific config example
```

## **ğŸ”— REPOSITORY VS. LOCAL INSTALLATION STRUCTURE**

### **GitHub Repository Structure** (Source):
```
powershell-profile/
â”œâ”€â”€ Modules/           # 16 module files (source)
â”œâ”€â”€ Scripts/           # Support scripts
â”œâ”€â”€ Microsoft.PowerShell_profile.ps1  # Main loader
â””â”€â”€ Setup-Modular.ps1  # Installer script
```

### **Local Installation Structure** (After Setup):
```
$HOME\Documents\PowerShell\
â”œâ”€â”€ Modules/           # 16 module files (copied from repo)
â”œâ”€â”€ Scripts/           # Support scripts (copied)
â”œâ”€â”€ Microsoft.PowerShell_profile.ps1  # Main loader (copied)
â”œâ”€â”€ HFCustom.ps1      # User customizations (created locally)
â””â”€â”€ LastExecutionTime.txt  # Auto-generated by profile
```

## **ğŸ“‹ FILE DETAILS & PURPOSES**

### **Root Directory Files:**
| File | Purpose | Required? |
|------|---------|-----------|
| `README.md` | Main documentation, setup instructions, features list | âœ… Yes |
| `Setup-Modular.ps1` | **Primary installer** - downloads all modules & configures profile | âœ… Yes |
| `Setup.ps1` | Legacy/alternative installer (for backward compatibility) | âš ï¸ Optional |
| `Microsoft.PowerShell_profile.ps1` | Main profile loader - orchestrates module loading | âœ… Yes |
| `HFCustom.ps1.example` | Template for user customizations (renamed locally) | âœ… Recommended |
| `LICENSE` | MIT license for the project | âœ… Yes |
| `.gitignore` | Git ignore rules (excludes sensitive/user-specific files) | âœ… Yes |

### **Modules Directory** (16 Core Modules):
| Module | Key Functions | Dependencies |
|--------|--------------|--------------|
| `ProfileConfig.ps1` | Configuration variables, debug settings, update intervals | None (loads first) |
| `CoreFunctions.ps1` | `Test-CommandExists`, `Get-ProfileDirectory`, basic utilities | None |
| `DebugModule.ps1` | Debug mode handling, debug messages | ProfileConfig |
| `UpdateModule.ps1` | `Update-Profile`, `Update-PowerShell`, update checks | CoreFunctions |
| `AdminModule.ps1` | Admin prompt, `admin`/`su` functions, UAC handling | CoreFunctions |
| `EditorModule.ps1` | Editor configuration, `Edit-Profile`, `vim`/`code` aliases | CoreFunctions |
| `NetworkModule.ps1` | `Get-PubIP`, `flushdns`, network diagnostics | CoreFunctions |
| `SystemModule.ps1` | `uptime`, `sysinfo`, `reload-profile` | CoreFunctions |
| `GitModule.ps1` | `gs`, `ga`, `gc`, `gpush`, `gpull`, git shortcuts | None |
| `NavigationModule.ps1` | `docs`, `dtop`, `mkcd`, `g` (GitHub) | CoreFunctions |
| `UtilityModule.ps1` | `touch`, `ff`, `grep`, `which`, file utilities | CoreFunctions |
| `PSReadLineModule.ps1` | PSReadLine configuration, key bindings, history | None |
| `CompletionModule.ps1` | Custom completions for git, npm, dotnet | PSReadLineModule |
| `ThemeModule.ps1` | Starship initialization, prompt theming | CoreFunctions |
| `ZoxideModule.ps1` | Zoxide initialization, smart `cd` replacement | CoreFunctions |
| `HelpModule.ps1` | `Show-Help` function, command documentation | All modules |

### **Scripts Directory:**
| Script | Purpose | When to Use |
|--------|---------|-------------|
| `verify-installation.ps1` | Post-install verification, checks all modules | After setup, when troubleshooting |
| `update-all.ps1` | Batch update of all tools & modules | Periodic maintenance |

## **ğŸ”„ HOW THE SETUP PROCESS WORKS**

1. **User runs `Setup-Modular.ps1`** from the repository
2. **Script creates local structure** at `$HOME\Documents\PowerShell\`
3. **Downloads all 16 modules** from `Modules/` directory
4. **Copies main profile** (`Microsoft.PowerShell_profile.ps1`)
5. **Creates `HFCustom.ps1`** from example template
6. **Sets up `Scripts/` directory** with verification tools
7. **Profile loads modules in correct order** on next PowerShell start

## **ğŸ¯ MODULE LOADING ORDER**
The main profile loads modules in this specific sequence:
```
1. ProfileConfig.ps1     # Configuration first
2. CoreFunctions.ps1     # Basic utilities
3. DebugModule.ps1       # Debug setup
4. UpdateModule.ps1      # Update checks
5. AdminModule.ps1       # Admin functions
6. EditorModule.ps1      # Editor config
7. NetworkModule.ps1     # Network tools
8. SystemModule.ps1      # System info
9. GitModule.ps1         # Git integration
10. NavigationModule.ps1 # Navigation
11. UtilityModule.ps1    # Utilities
12. PSReadLineModule.ps1 # CLI enhancements
13. CompletionModule.ps1 # Auto-completion
14. ThemeModule.ps1      # Prompt theming
15. ZoxideModule.ps1     # Smart navigation
16. HelpModule.ps1       # Help system
```

## **ğŸ”§ CUSTOMIZATION POINTS**

| Location | Purpose | User Action |
|----------|---------|-------------|
| `HFCustom.ps1` | **Primary customization** - overrides, new functions | Edit directly, safe from updates |
| `HFCustom-COMPUTERNAME.ps1` | Machine-specific settings | Create per-machine files |
| Individual `.ps1` files in `Modules/` | Modify specific module behavior | Edit module files (may be overwritten) |
| `*_Override` variables | Override specific settings | Define in `HFCustom.ps1` |

## **ğŸ“¦ WHAT GETS DEPLOYED WHERE**

### **From Repository â†’ Local Installation:**
```
GitHub Repository                          User's Computer
===================                        =================
powershell-profile/                        $HOME\Documents\PowerShell\
â”œâ”€â”€ Modules/*.ps1        â†’ copies â†’        â”œâ”€â”€ Modules/*.ps1
â”œâ”€â”€ Scripts/*.ps1        â†’ copies â†’        â”œâ”€â”€ Scripts/*.ps1
â”œâ”€â”€ Microsoft...profile.ps1 â†’ copies â†’     â”œâ”€â”€ Microsoft.PowerShell_profile.ps1
â””â”€â”€ HFCustom.ps1.example â†’ creates â†’      â”œâ”€â”€ HFCustom.ps1 (customized)
                                           â””â”€â”€ (auto-generated files)
```

### **Files NOT in Repository (Local Only):**
* `HFCustom.ps1` (user's personal copy)
* `HFCustom-COMPUTERNAME.ps1` (machine-specific)
* `LastExecutionTime.txt` (auto-generated by update system)
* Any user-created modules in local `Modules/` directory

## **ğŸ’¡ BEST PRACTICES FOR REPOSITORY MAINTENANCE**

1. **Keep modules independent** - each module should handle one concern
2. **Maintain loading order** - dependencies must load first
3. **Document all functions** - include help comments in each module
4. **Test module isolation** - each module should load independently
5. **Version module files** - include version comments in each module
6. **Backward compatibility** - don't break existing user customizations

## **ğŸ”§ YOUR REPOSITORY SETUP**

Since you're using your own repository (`hetfs/powershell-profile`), here are the key URLs:

**Repository URL:** `https://github.com/hetfs/powershell-profile`

**Raw File URLs:**
* `https://raw.githubusercontent.com/hetfs/powershell-profile/main/Setup-Modular.ps1`
* `https://raw.githubusercontent.com/hetfs/powershell-profile/main/Microsoft.PowerShell_profile.ps1`
* `https://raw.githubusercontent.com/hetfs/powershell-profile/main/Modules/FILENAME.ps1`

**One-Line Installation:**
```powershell
irm https://raw.githubusercontent.com/hetfs/powershell-profile/main/Setup-Modular.ps1 | iex
```

This structure ensures:
* âœ… **Easy updates** users can pull latest modules without losing customizations
* âœ… **Selective loading** users can disable modules by commenting them out
* âœ… **Version control** track changes to specific modules
* âœ… **Sharing** share individual modules between machines
* âœ… **Debugging** isolate issues to specific modules
* âœ… **Extensibility** add new modules without modifying core structure

The repository serves as the **single source of truth**, while local installations are **deployment instances** that can be customized without affecting the source.
